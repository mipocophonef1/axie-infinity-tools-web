(this["webpackJsonpaxie-tools-web"]=this["webpackJsonpaxie-tools-web"]||[]).push([[0],{248:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_createdAt","type":"uint256"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"checkpoint","outputs":[{"internalType":"uint256","name":"_balance","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]')},441:function(e,n,t){},473:function(e,n){},475:function(e,n){},477:function(e,n){},481:function(e,n){},507:function(e,n){},509:function(e,n){},518:function(e,n){},520:function(e,n){},529:function(e,n){},531:function(e,n){},649:function(e,n){},651:function(e,n){},658:function(e,n){},659:function(e,n){},805:function(e,n){},807:function(e,n){},859:function(e,n,t){},860:function(e,n,t){"use strict";t.r(n);var r,a,s,c,i,o=t(0),l=t.n(o),u=t(90),d=t.n(u),f=(t(441),t(418)),h=t(919),p=t(24),g=t(917),b=t(910),m=t(933),j=t(33),x=t(48),v=x.a.div(r||(r=Object(j.a)(["\n  display: flex;\n  padding: 25px;\n"]))),y=x.a.div(a||(a=Object(j.a)(["\n  margin: auto;\n  max-width: 1450px;\n  min-width: 700px;\n"]))),O=(x.a.div(s||(s=Object(j.a)(["\n  width: 250px;\n  text-align: left;\n  position: absolute;\n  top: 25;\n  left: 25;\n"]))),x.a.img(c||(c=Object(j.a)(["\n  width: 160px;\n"]))),x.a.div(i||(i=Object(j.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 16px;\n"])))),w=t(11),S=t.n(w),A=t(32),k=t(903),T=t(904),P=t(905),M=t(916),C=t(925),L=t(926),B=t(927),z=t(914),E=t(920),I=t(4),W=t(152),_=t.n(W),N=t(935),K=t(897),R=t(245),H=t.n(R),U=t(911),D=t(69),F=Object(D.format)((function(e){var n;return(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.error)instanceof Error&&(e.metadata.error=e.metadata.error.message),e})),q=Object(D.format)((function(e){if(null===e||void 0===e?void 0:e.friendlyMessage){var n=window.document.getElementById("logs");if(n){var t="".concat(e.level,": ").concat(e.friendlyMessage);n.innerHTML&&(n.innerHTML+="<br /><br />"),n.innerHTML+=t,n.scrollTop=n.scrollHeight}delete e.friendlyMessage}return e})),J=Object(D.createLogger)({level:"info",exitOnError:!1,transports:[new D.transports.Console({format:D.format.combine(q(),D.format.errors({stack:!1}),D.format.metadata(),D.format.timestamp(),F(),D.format.colorize(),D.format.simple())})]}),G=t(247),V=t(196),X=t.n(V),$=t(12),Q=t(13),Y=t(419);var Z=function(e){Object($.a)(t,e);var n=Object(Q.a)(t);function t(e){var r,a,s,c=e.slug,i=e.message,o=e.friendlyMessage,l=e.context;return Object(I.a)(this,t),(s=n.call(this,null!==(r=null!==(a=null!==c&&void 0!==c?c:i)&&void 0!==a?a:o)&&void 0!==r?r:"Something went wrong")).friendlyMessage=void 0,s.friendlyMessages=[],s.slugs=[],s.context=void 0,c&&s.slugs.push(c),s.friendlyMessage=o,s.context=l||{},s}return t}(Object(Y.a)(Error)),ee=function(e){var n,t=e.error,r=e.slug,a=e.message,s=e.context,c=e.friendlyMessage;if(function(e){var n;return!!(e&&e instanceof Z)&&void 0!==(null===(n=e.slugs)||void 0===n?void 0:n.length)}(t)){var i;if(r&&t.slugs.push(r),!t.friendlyMessage&&c&&(t.friendlyMessage=c),t.friendlyMessage&&c)null===(i=t.friendlyMessages)||void 0===i||i.push(c);return s&&(t.context=Object.assign(t.context,s)),t}if("string"===typeof t)return new Z({slug:r,message:t,context:s,friendlyMessage:c});var o=new Z({slug:r,message:null!==(n=t.message)&&void 0!==n?n:a,context:s,friendlyMessage:c}),l=Object.assign(o,t);return t.stack&&(l.stack=t.stack),l};X.a.manifest({email:"fabra.livenation@gmail.com",appUrl:"https://metamask.io"});var ne=function e(){Object(I.a)(this,e)};ne.signMessage=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.ethereumSignMessage({path:n.walletPath,message:n.message});case 3:if((t=e.sent).success){e.next=6;break}throw t.payload;case 6:return r=t.payload.signature,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),ee({slug:"TrezorSigner.signMessage.error",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}(),ne.signTransaction=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a,s,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={chainId:n.chainId,data:n.data,gasLimit:n.gasLimit,gasPrice:n.gasPrice,nonce:n.nonceString,to:n.to,value:n.value},e.next=4,X.a.ethereumSignTransaction({path:n.walletPath,transaction:t});case 4:if((r=e.sent).success){e.next=7;break}throw r.payload.error;case 7:return a={v:parseInt(r.payload.v.substring(2),16),r:r.payload.r,s:r.payload.s},s=Object(G.a)(Object(G.a)({},t),{},{nonce:n.nonceNumber}),c=U.a.serializeTransaction(s,a),e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),ee({slug:"TrezorSigner.signTransaction.error",error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}();var te=ne,re=t(143),ae=function e(){Object(I.a)(this,e)};ae._privateKeys={},ae.amountOfUpdates=0,ae.findPrivateKey=function(e){return ae._privateKeys[e]||ae._privateKeys["ronin:"+e.substring(2)]},ae.hasPrivateKey=function(e){return Boolean(ae.findPrivateKey(e))},ae.setPrivateKeys=function(e){ae._privateKeys=e,ae.amountOfUpdates+=1};var se=function e(){Object(I.a)(this,e)};se.signMessage=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=new re.a(ae.findPrivateKey(n.from))).address.toLowerCase()===n.from){e.next=4;break}throw ee({slug:"PrivateKeySigner.signMessage.error.invalidPrivateKey",friendlyMessage:"Given private key for this address is not correct",error:"invalid private key"});case 4:return e.next=6,t.signMessage(n.message);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),ee({slug:"PrivateKeySigner.signMessage.error",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}(),se.signTransaction=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t={chainId:n.chainId,data:n.data,from:n.from,gasLimit:n.gasLimit,gasPrice:n.gasPrice,nonce:n.nonceNumber,to:n.to},(r=new re.a(ae.findPrivateKey(n.from))).address.toLowerCase()===t.from){e.next=5;break}throw ee({slug:"PrivateKeySigner.signTransaction.error.invalidPrivateKey",friendlyMessage:"Given private key for this address is not correct",error:"invalid private key"});case 5:return e.next=7,r.signTransaction(t);case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),ee({slug:"PrivateKeySigner.signTransaction.error",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}();var ce=se,ie=t(248),oe="0xa8754b9fa15fc18bb59458815510e40a12cd2014",le="ronin:a8754b9fa15fc18bb59458815510e40a12cd2014",ue=U.a.hexlify(1e5),de=U.a.hexlify(0),fe=U.a.hexlify(0),he=new H.a("https://proxy.roninchain.com/free-gas-rpc"),pe=new he.eth.Contract(ie,oe),ge=new(new H.a("https://api.roninchain.com/rpc").eth.Contract)(ie,oe),be=function e(){Object(I.a)(this,e)};be.validateAddress=function(e){var n=!1;try{n=Boolean(e.startsWith("ronin:")&&U.a.getAddress(e.replace("ronin:","0x")))}catch(t){n=!1}if(!n)throw ee({slug:"RoninBlockchain.validateAddress.error",friendlyMessage:"Invalid ronin address: ".concat(e),context:{roninWalletAddres:e},error:"invalid ronin address"});return n},be.transformToEthWallet=function(e){return be.validateAddress(e),e.replace("ronin:","0x").toLocaleLowerCase()},be._getTransactionCount=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=be.transformToEthWallet(n),r=ye.getTransactionCount(n),e.next=4,he.eth.getTransactionCount(t);case 4:return a=e.sent,s=Math.max(r,a),ye.incrementTransactionCount(n,s-r),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),be._signAndSendTransaction=function(){var e=Object(A.a)(S.a.mark((function e(n,t,r){var a,s,c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be._getTransactionCount(n);case 3:if(a=e.sent,s={chainId:2020,data:r,from:be.transformToEthWallet(n),gasLimit:ue,gas:ue,gasPrice:de,nonceNumber:a,nonceString:U.a.hexlify(a),to:be.transformToEthWallet(t),value:fe,walletPath:ye.getPath(n)},!ye.inTrezor(n)){e.next=11;break}return e.next=8,te.signTransaction(s);case 8:c=e.sent,e.next=14;break;case 11:return e.next=13,ce.signTransaction(s);case 13:c=e.sent;case 14:return e.next=16,he.eth.sendSignedTransaction(c);case 16:return i=e.sent,ye.incrementTransactionCount(n),e.abrupt("return",i.transactionHash);case 21:throw e.prev=21,e.t0=e.catch(0),ee({slug:"RoninBlockchain._signAndSendTransaction.error",error:e.t0});case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(n,t,r){return e.apply(this,arguments)}}(),be.signMessage=function(){var e=Object(A.a)(S.a.mark((function e(n,t){var r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={from:be.transformToEthWallet(n),message:t,walletPath:ye.getPath(n)},!ye.inTrezor(n)){e.next=7;break}return e.next=4,te.signMessage(r);case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,ce.signMessage(r);case 9:a=e.sent;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),be.getSlpBalance=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=be.transformToEthWallet(n),r=ge.methods.balanceOf(t),e.next=4,r.call();case 4:return a=e.sent,e.abrupt("return",Number(a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),be.transferSlp=function(){var e=Object(A.a)(S.a.mark((function e(n,t,r){var a,s,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r<=0)&&Number.isInteger(r)){e.next=3;break}throw new Error("RoninBlockchain.transferSlp.error.invalidAmount");case 3:return J.info("RoninBlockchain.transferSlp.started",{from:n,to:t,amount:r,friendlyMessage:"Sending ".concat(r," SLP from ").concat(n," to ").concat(t)}),a=be.transformToEthWallet(t),s=pe.methods.transfer(a,r).encodeABI(),e.next=8,be._signAndSendTransaction(n,le,s);case 8:return c=e.sent,J.info("RoninBlockchain.transferSlp.finished",{from:n,to:t,amount:r,transactionHash:c,friendlyMessage:"Transfer SLP transaction Completed - TX: ".concat(c," - ").concat(r," SLP from ").concat(n," to ").concat(t)}),e.abrupt("return",{transactionHash:c,from:n,to:t,amount:r});case 13:throw e.prev=13,e.t0=e.catch(0),ee({slug:"RoninBlockchain.transferSlp.error",friendlyMessage:"Something when wrong while sending ".concat(r," SLP from ").concat(n," to ").concat(t),context:{from:n,to:t,amount:r},error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n,t,r){return e.apply(this,arguments)}}(),be.claimSlp=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.getClaimSlpBlockchainSignature(n);case 3:return t=e.sent,r=pe.methods.checkpoint(be.transformToEthWallet(n),t.amount,t.timestamp,t.signature).encodeABI(),J.info("RoninBlockchain.claimSlp.started",{roninWalletAddres:n,friendlyMessage:"Initating transaction to claim SLPs for ".concat(n)}),e.next=8,be._signAndSendTransaction(n,le,r);case 8:return a=e.sent,J.info("RoninBlockchain.claimSlp.finished",{roninWalletAddres:n,transactionHash:a,friendlyMessage:"SLPs have been claimed for ".concat(n," - TX: ").concat(a)}),e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),ee({slug:"RoninBlockchain.claimSlp.error",context:{roninWalletAddres:n},error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}();var me=function e(){Object(I.a)(this,e)};me._generateAccessToken=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a,s,c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()("https://graphql-gateway.axieinfinity.com/graphql",{method:"POST",data:{operationName:"CreateRandomMessage",variables:{},query:"mutation CreateRandomMessage{createRandomMessage}"}});case 3:return t=e.sent,r=t.data.data.createRandomMessage,J.info("RoninBlockchain.claimSlp.finished",{walletAddress:n,friendlyMessage:"Signing message to log in to axie infinity marketplace account."}),e.next=8,be.signMessage(n,r);case 8:return a=e.sent,s=be.transformToEthWallet(n),e.next=12,_()("https://graphql-gateway.axieinfinity.com/graphql",{method:"POST",data:{operationName:"CreateAccessTokenWithSignature",variables:{input:{mainnet:"ronin",owner:s,message:r,signature:a}},query:"mutation CreateAccessTokenWithSignature($input: SignatureInput!) {createAccessTokenWithSignature(input: $input) {newAccount result accessToken __typename}}"}});case 12:return c=e.sent,i=c.data.data.createAccessTokenWithSignature.accessToken,e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(0),ee({slug:"AxieInfinityApi.generateAccessToken.error",friendlyMessage:"Error while generating marketplace credentials for ".concat(n),error:e.t0});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(n){return e.apply(this,arguments)}}(),me.hasUnclaimedSlp=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a,s,c,i,o,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J.info("AxieInfinityApi.hasUnclaimedSlp.started",{friendlyMessage:"Validating claim for ".concat(n)}),t=be.transformToEthWallet(n),r="https://game-api.skymavis.com/game-api/clients/".concat(t,"/items/1"),e.next=6,_()(r,{method:"GET"});case 6:if(a=e.sent,(s=a.data.total)&&!(s<=0)){e.next=10;break}return e.abrupt("return",{isClaimAvailable:!1,balance:s});case 10:if(c=a.data.last_claimed_item_at,i=new Date(1e3*c),o=Object(N.a)(i,14),l=new Date,Object(K.a)(l,o)){e.next=17;break}return e.abrupt("return",{isClaimAvailable:!1,balance:s});case 17:return J.info("AxieInfinityApi.hasUnclaimedSlp.finished",{friendlyMessage:"Claim is available for ".concat(n)}),e.abrupt("return",{isClaimAvailable:!0,balance:s});case 21:throw e.prev=21,e.t0=e.catch(0),ee({slug:"AxieInfinityApi.hasUnclaimedSlp.error",friendlyMessage:"Error while calculating unclaimed SLP for ".concat(n),error:e.t0});case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(n){return e.apply(this,arguments)}}(),me.getClaimSlpBlockchainSignature=function(){var e=Object(A.a)(S.a.mark((function e(n){var t,r,a,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me._generateAccessToken(n);case 3:return t=e.sent,J.info("AxieInfinityApi.getClaimSlpBlockchainSignature.started",{friendlyMessage:"Fetching blockchain claim transaction from the marketplace for ".concat(n)}),r=be.transformToEthWallet(n),e.next=8,_()("https://game-api.skymavis.com/game-api/clients/".concat(r,"/items/1/claim"),{method:"POST",headers:{authorization:"Bearer ".concat(t)},data:{}});case 8:return a=e.sent,s=a.data.blockchain_related.signature,e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(0),ee({slug:"AxieInfinityApi.getClaimSlpBlockchainSignature.error",friendlyMessage:"Error while fetching transaction data from the marketplace for ".concat(n),error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}();var je=["ronin:0aa5f40bc4aefcedf3f0baf40fd97bc95049714e","ronin:3e8c0fcd45c88cdd72d83b64bdcedbb0ee4e337e"],xe=0,ve=function(){var e=je[xe];return xe=0===xe?1:0,e},ye=function e(n){var t=this;Object(I.a)(this,e),this.accountName=void 0,this.scholarPaymentWalletAddress=void 0,this.walletAddress=void 0,this.managerPercentage=void 0,this.localLogger=void 0,this.inTrezor=void 0,this.trezorAccountNumber=void 0,this.transactionCount=0,this.claimSlp=Object(A.a)(S.a.mark((function e(){var n,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.localLogger.info("roninAccount.claimSlp.started",{friendlyMessage:"Starting to claim SLP for ".concat(t.walletAddress)}),e.next=4,me.hasUnclaimedSlp(t.walletAddress);case 4:if(n=e.sent,r=n.isClaimAvailable,a=n.balance){e.next=9;break}throw ee({slug:"roninAccount.claimSlp.error.hasNoBalance",context:{balance:a,isClaimAvailable:r},friendlyMessage:"Error while trying to claim SLP - Invalid balance: ".concat(a),error:"not enough balance to claim SLP"});case 9:return r||t.localLogger.error("roninAccount.claimSlp.error.hasNoUnclaimedSlp",{friendlyMessage:"Claim might not be available for ".concat(t.walletAddress,", trying anyway...")}),e.next=12,be.claimSlp(t.walletAddress);case 12:t.localLogger.info("roninAccount.claimSlp.finished"),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),ee({slug:"roninAccount.claimSlp.error",error:e.t0});case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),this.executePayouts=Object(A.a)(S.a.mark((function e(){var n,r,a,s,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.localLogger.info("roninAccount.executePayouts.started",{friendlyMessage:"Starting to send payouts for ".concat(t.walletAddress)}),n=window.document.getElementById("manager-address").value,e.prev=3,be.validateAddress(n),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(3),ee({slug:"roninAccount.executePayouts.error.invalidManagerAddress",context:{managerAddress:n},friendlyMessage:"Invalid manager address ".concat(n),error:e.t0});case 10:return e.next=12,be.getSlpBalance(t.walletAddress);case 12:if((r=e.sent)&&!(r<50)){e.next=15;break}throw ee({slug:"roninAccount.executePayouts.error.invalidBalance",context:{currentBalance:r,walletAddress:t.walletAddress},friendlyMessage:"Insufficient balance to send payouts, it must be greater than 50 - current balance: ".concat(r," SLP"),error:"insufficient balance for payouts"});case 15:return a=r,a-=100,t.localLogger.info("roninAccount.executePayouts.sendSlp.aromazServerFee",{friendlyMessage:"Sending ".concat(100," SLP to Aromaz (monthly fee)")}),e.next=21,be.transferSlp(t.walletAddress,"ronin:d43787af60b6050016c6145eb418209462e99275",100);case 21:return s=Math.trunc(a*(1-t.managerPercentage/100)),c=(a-=5)-s,t.localLogger.info("roninAccount.executePayouts.sendSlp.maintenanceFee",{friendlyMessage:"Sending ".concat(5," SLP to devs")}),e.next=27,be.transferSlp(t.walletAddress,ve(),5);case 27:return t.localLogger.info("roninAccount.executePayouts.sendSlp.manager",{friendlyMessage:"Sending ".concat(c," SLP to manager")}),e.next=30,be.transferSlp(t.walletAddress,n,c);case 30:return t.localLogger.info("roninAccount.executePayouts.sendSlp.scholar",{friendlyMessage:"Sending ".concat(s," SLP to scholar")}),e.next=33,be.transferSlp(t.walletAddress,t.scholarPaymentWalletAddress,s);case 33:t.localLogger.info("roninAccount.executePayouts.sendSlp.finished",{friendlyMessage:"Payouts have been transfered successfully"}),e.next=39;break;case 36:throw e.prev=36,e.t1=e.catch(0),ee({slug:"roninAccount.executePayouts.error",error:e.t1});case 39:case"end":return e.stop()}}),e,null,[[0,36],[3,7]])}))),this.accountName=n.name,this.scholarPaymentWalletAddress=n.scholarPaymentWalletAddress,this.walletAddress=n.address,this.managerPercentage=n.managerPercentage,this.inTrezor=n.inTrezor,this.trezorAccountNumber=n.trezorAccountNumber,this.localLogger=J.child({accountName:this.accountName,walletAddress:this.walletAddress}),e.allRoninAccounts[this.walletAddress]=this};ye.allRoninAccounts={},ye.getAccount=function(e){return ye.allRoninAccounts[e]||ye.allRoninAccounts["ronin:"+e.substring(2)]},ye.inTrezor=function(e){return ye.getAccount(e).inTrezor},ye.getPath=function(e){var n=ye.getAccount(e).trezorAccountNumber||1;return"m/44'/60'/0'/0/".concat(n-1)},ye.getTransactionCount=function(e){return ye.getAccount(e).transactionCount},ye.incrementTransactionCount=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ye.getAccount(e).transactionCount+=n};var Oe,we,Se,Ae,ke,Te,Pe,Me=t(2),Ce={amountOfPrivateKeysUpdates:0,shouldDisableButtons:!1,setPrivateKeys:function(e){},setShouldDisableButtons:function(e){}},Le=l.a.createContext(Ce),Be=function(e){var n=Object(o.useState)(0),t=Object(p.a)(n,2),r=t[0],a=t[1],s=Object(o.useState)(!1),c=Object(p.a)(s,2),i={shouldDisableButtons:c[0],setShouldDisableButtons:c[1],amountOfPrivateKeysUpdates:r,setPrivateKeys:function(e){ae.setPrivateKeys(e),a(r+1)}};return Object(Me.jsx)(Le.Provider,{value:i,children:e.children})},ze=x.a.div(Oe||(Oe=Object(j.a)(["\n  align-items: center;\n  //background-color: #1E1E1E;\n  border-radius: 7px;\n  display: flex;\n  justify-content: space-around;\n  min-height: 90px;\n  padding: 0 20px;\n  width: 100%;\n"]))),Ee=x.a.div(we||(we=Object(j.a)(["\n  padding: 0 20px;\n  text-align: left;\n"]))),Ie=x.a.span(Se||(Se=Object(j.a)(["\n  font-weight: 600;\n"]))),We=function(e){return new Promise((function(n){return setTimeout(n,1e3*e)}))},_e=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if(e.length<=n)return e;var r=t.length,a=n-r,s=Math.ceil(a/2),c=Math.floor(a/2);return e.substring(0,s)+t+e.substring(e.length-c)},Ne=function(e){var n=Object(o.useState)(!0),t=Object(p.a)(n,2),r=t[0],a=t[1],s=Object(o.useState)(!0),c=Object(p.a)(s,2),i=c[0],l=c[1],u=Object(o.useContext)(Le),d=u.shouldDisableButtons,f=u.setShouldDisableButtons,h=ae.hasPrivateKey(e.scholar.address),g=new ye(e.scholar),b=function(){var e=Object(A.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),(n=window.document.getElementById("logs"))&&(n.innerHTML=""),e.prev=3,!r){e.next=9;break}return e.next=7,g.claimSlp();case 7:return e.next=9,We(10);case 9:if(!i){e.next=12;break}return e.next=12,g.executePayouts();case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),J.error(e.t0),J.info("scholar.runCommands.error",{friendlyMessage:"(press F12 -> console to see the errors)"});case 19:J.info("done",{friendlyMessage:"Done!"}),f(!1);case 21:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();return Object(Me.jsxs)(M.a,{style:{backgroundColor:"#1E1E1E",width:"100%"},children:[Object(Me.jsx)(C.a,{expandIcon:Object(Me.jsx)(k.a,{fontSize:"large"}),children:Object(Me.jsxs)(ze,{children:[Object(Me.jsxs)(Ee,{children:[Object(Me.jsx)("div",{children:Object(Me.jsx)(Ie,{children:e.scholar.name})}),Object(Me.jsx)("div",{children:_e(e.scholar.address,15)})]}),Object(Me.jsxs)(Ee,{children:["Manager : ",Object(Me.jsxs)(Ie,{children:[e.scholar.managerPercentage,"%"]}),Object(Me.jsx)("br",{}),"Scholar :"," ",Object(Me.jsxs)(Ie,{children:[100-e.scholar.managerPercentage,"%"]})]}),Object(Me.jsxs)(Ee,{children:["Trezor: ",Object(Me.jsx)(Ie,{children:e.scholar.inTrezor?"yes":"no"}),Object(Me.jsx)("br",{}),e.scholar.inTrezor&&"Account: ".concat(e.scholar.trezorAccountNumber||"missing")]}),Object(Me.jsxs)(Ee,{children:["Private key:"," ",Object(Me.jsx)(Ie,{children:h?"ready":"missing"})]})]})}),Object(Me.jsx)(L.a,{children:Object(Me.jsxs)(ze,{children:[Object(Me.jsxs)(Ee,{children:[Object(Me.jsx)(B.a,{control:Object(Me.jsx)(z.a,{checked:r,onChange:function(e){return a(e.target.checked)}}),label:"Claim SLP"}),Object(Me.jsx)("br",{}),Object(Me.jsx)(B.a,{control:Object(Me.jsx)(z.a,{checked:i,onChange:function(e){return l(e.target.checked)}}),label:"Send payouts"})]}),Object(Me.jsx)(Ee,{children:Object(Me.jsx)(E.a,{variant:"outlined",onClick:b,startIcon:Object(Me.jsx)(T.a,{}),disabled:d||!e.scholar.inTrezor||!e.scholar.trezorAccountNumber,children:"Run with Trezor"})}),Object(Me.jsx)(Ee,{children:Object(Me.jsx)(E.a,{variant:"outlined",onClick:b,startIcon:Object(Me.jsx)(P.a,{}),disabled:d||!h,children:"Run with private key"})})]})})]})},Ke=t(190),Re=t.n(Ke),He=t(928),Ue=t(922),De=t(930),Fe=t(931),qe=t(932),Je=t(934),Ge=["address","name","managerPercentage","scholarPaymentAddress","inTrezor","trezorAccountNumber"],Ve=function(e){var n=l.a.useState(!1),t=Object(p.a)(n,2),r=t[0],a=t[1],s=l.a.useState(""),c=Object(p.a)(s,2),i=c[0],o=c[1],u=function(){a(!1)},d=function(){var n=Object(A.a)(S.a.mark((function n(){var t,r;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Re()({headers:Ge,noheader:!0,checkColumn:!0}).fromString(i);case 2:t=n.sent,r=t.map((function(e){return{address:e.address.toLowerCase(),inTrezor:"false"!==e.inTrezor,managerPercentage:Number(e.managerPercentage),name:e.name,scholarPaymentWalletAddress:e.scholarPaymentAddress.toLowerCase(),trezorAccountNumber:Number(e.trezorAccountNumber)||1}})),e.addMoreScholars(r),u();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(Me.jsxs)(ze,{children:[Object(Me.jsx)(Ee,{children:Object(Me.jsx)(He.a,{onClick:function(){a(!0)},children:Object(Me.jsx)(Ie,{children:"+ Add scholars"})})}),Object(Me.jsxs)(Ue.a,{open:r,onClose:u,children:[Object(Me.jsx)(De.a,{children:"Add Scholars"}),Object(Me.jsxs)(Fe.a,{children:[Object(Me.jsxs)(qe.a,{children:["CSV format:",Object(Me.jsx)("br",{}),Ge.join(", "),Object(Me.jsx)("br",{}),Object(Me.jsx)("br",{})]}),Object(Me.jsx)(b.a,{multiline:!0,minRows:10,placeholder:"ronin:tyuio, John, 50, ronin:tyuio, true, 5",style:{width:"100%",minWidth:"500px"},value:i,onChange:function(e){return o(e.target.value)}})]}),Object(Me.jsx)(Je.a,{children:Object(Me.jsx)(He.a,{onClick:d,children:"Add scholars"})})]})]})},Xe=(x.a.div(Ae||(Ae=Object(j.a)(["\n  align-items: center;\n  background-color: #1e1e1e;\n  border-radius: 7px;\n  display: flex;\n  justify-content: space-around;\n  min-height: 90px;\n  padding: 0 20px;\n  width: 100%;\n"]))),x.a.div(ke||(ke=Object(j.a)(["\n  padding: 0 20px;\n  text-align: left;\n"]))),x.a.span(Te||(Te=Object(j.a)(["\n  font-weight: 600;\n"])))),$e=["address","privateKey"],Qe=function(){var e=Object(o.useContext)(Le),n=l.a.useState(!1),t=Object(p.a)(n,2),r=t[0],a=t[1],s=l.a.useState(""),c=Object(p.a)(s,2),i=c[0],u=c[1],d=function(){a(!1)},f=function(){var n=Object(A.a)(S.a.mark((function n(){var t,r;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Re()({headers:$e,noheader:!0,checkColumn:!0}).fromString(i);case 2:t=n.sent,r={},t.forEach((function(e){var n=e.address.toLowerCase(),t=e.privateKey.toLowerCase();r[n]=t})),e.setPrivateKeys(r),d();case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(Me.jsxs)("div",{children:[Object(Me.jsx)(He.a,{onClick:function(){a(!0)},children:Object(Me.jsx)(Xe,{children:"Set private keys"})}),Object(Me.jsxs)(Ue.a,{open:r,onClose:d,children:[Object(Me.jsx)(De.a,{children:"Add private keys"}),Object(Me.jsxs)(Fe.a,{children:[Object(Me.jsxs)(qe.a,{children:["CSV format:",Object(Me.jsx)("br",{}),$e.join(", "),Object(Me.jsx)("br",{}),Object(Me.jsx)("br",{})]}),Object(Me.jsx)(b.a,{multiline:!0,minRows:10,placeholder:"ronin:tyuio,0xabcd",style:{width:"100%",minWidth:"500px"},value:i,onChange:function(e){return u(e.target.value)}})]}),Object(Me.jsx)(Je.a,{children:Object(Me.jsx)(He.a,{onClick:f,children:"Confirm"})})]})]})},Ye=t(929),Ze=x.a.div(Pe||(Pe=Object(j.a)(["\n  border-radius: 7px;\n  border: 1px solid #ffffff3b;\n  font-family: monospace;\n  height: 500px;\n  overflow: auto;\n  padding: 20px;\n  text-align: left;\n  width: 700px;\n"]))),en=function(){var e=window.document.getElementById("logs"),n=Object(o.useContext)(Le).shouldDisableButtons,t=n||(null===e||void 0===e?void 0:e.innerHTML);return Object(Me.jsxs)("div",{style:{display:t?"block":"none"},children:["Current process",Object(Me.jsx)("br",{}),Object(Me.jsx)("br",{}),n&&Object(Me.jsxs)(Me.Fragment,{children:[Object(Me.jsx)(Ye.a,{size:20}),Object(Me.jsx)("br",{}),Object(Me.jsx)("br",{})]}),Object(Me.jsx)(Ze,{id:"logs"})]})},nn=[],tn=function(){var e=Object(o.useState)(nn),n=Object(p.a)(e,2),t=n[0],r=n[1];return Object(Me.jsx)(v,{children:Object(Me.jsxs)(y,{children:[Object(Me.jsx)(en,{}),Object(Me.jsx)("h2",{children:"Manager"}),Object(Me.jsx)(b.a,{label:"Manager Address (Ronin)",variant:"outlined",style:{width:"500px"},id:"manager-address"}),Object(Me.jsx)("br",{}),Object(Me.jsx)("br",{}),Object(Me.jsx)("h2",{children:"Scholars"}),Object(Me.jsx)(O,{children:Object(Me.jsx)(Qe,{})}),Object(Me.jsxs)(m.a,{children:[t.map((function(e){return Object(Me.jsx)(g.a,{children:Object(Me.jsx)(Ne,{scholar:e})},e.address)})),Object(Me.jsx)(g.a,{children:Object(Me.jsx)(Ve,{addMoreScholars:function(e){r(e)}})})]})]})})},rn=(t(859),Object(f.a)({palette:{mode:"dark",primary:{main:"#FFF"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none",borderRadius:"7px"}}}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',button:{textTransform:"none"}}}));var an=function(){return Object(Me.jsx)("div",{className:"App",children:Object(Me.jsx)(h.a,{theme:rn,children:Object(Me.jsx)(Be,{children:Object(Me.jsx)(tn,{})})})})};d.a.render(Object(Me.jsx)(l.a.StrictMode,{children:Object(Me.jsx)(an,{})}),document.getElementById("root"))}},[[860,1,2]]]);
//# sourceMappingURL=main.b95fe87a.chunk.js.map